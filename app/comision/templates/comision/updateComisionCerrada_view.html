{% extends "base_template.html" %}

{% block title %} Actualizar comisión {% endblock %}

{% block content %}
<div class="card container mb-5">
    {% with messages = get_flashed_messages()  %}
      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-danger alert-dismissible fade show m-3" role="alert">
        {{ message }}
        <button type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}
    <div class="card-title m-3">
        <h5 class="card-title">Datos comisión</h5>
    </div>
    <div class="card-body">
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <fieldset>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            {{ form.nombre.label(class_='form-label mt-4') }}
                            {{ form.nombre(class_='form-control') }}
                            {% for error in form.nombre.errors %}
                                <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                            {{ form.comentarios.label(class_='form-label mt-4') }}
                            {{ form.comentarios(class_='form-control') }}
                            {% for error in form.comentarios.errors %}
                                <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="form-group">
                            <label class="form-label mt-4 isDisabled-label" for="fecha_apertura">Fecha de apertura</label>
                            <input class="form-control isDisabled" id="fecha_apertura" name="fecha_apertura" type="text" value="{{comision.fecha_apertura | datetime}}">
                        </div>
                        <div class="form-group">
                            <label class="form-label mt-4 isDisabled-label" for="fecha_apertura">Fecha de cierre</label>
                            <input class="form-control isDisabled" id="fecha_cierre" name="fecha_cierre" type="text" value="{{comision.fecha_cierre | datetime}}">
                        </div>
                    </div>
                </div>
                <div class="d-flex align-items-baseline">
                    <h5 class="mt-5 isDisabled-label">Composición</h5>
                    <!--
                    <a href="#" data-bs-toggle="popover" title="Información" data-bs-content="Esta comisión ya se encuentra cerrada." class="isDisabled">
                        <svg class="isDisabled" fill="#000000" width="20px" height="20px" viewBox="0 0 0.9 0.9" version="1.1" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>help-line</title><path d="M0.45 0.05a0.4 0.4 0 1 0 0.4 0.4A0.4 0.4 0 0 0 0.45 0.05Zm0 0.75a0.35 0.35 0 1 1 0.35 -0.35 0.35 0.35 0 0 1 -0.35 0.35Z" class="clr-i-outline clr-i-outline-path-1"/><path d="M0.457 0.223a0.184 0.184 0 0 0 -0.143 0.064 0.025 0.025 0 0 0 -0.008 0.018 0.023 0.023 0 0 0 0.024 0.023 0.027 0.027 0 0 0 0.018 -0.007 0.143 0.143 0 0 1 0.108 -0.05c0.059 0 0.096 0.038 0.096 0.085v0.001c0 0.055 -0.044 0.086 -0.114 0.091a0.02 0.02 0 0 0 -0.019 0.023s0 0.058 0 0.069a0.025 0.025 0 0 0 0.025 0.023h0.003a0.025 0.025 0 0 0 0.023 -0.025v-0.052c0.075 -0.011 0.136 -0.05 0.136 -0.132v-0.001c-0.001 -0.075 -0.059 -0.13 -0.148 -0.13Z" class="clr-i-outline clr-i-outline-path-2"/><path cx="17.78" cy="26.2" r="1.25" class="clr-i-outline clr-i-outline-path-3" d="M0.476 0.655A0.031 0.031 0 0 1 0.445 0.686A0.031 0.031 0 0 1 0.413 0.655A0.031 0.031 0 0 1 0.476 0.655z"/><path x="0" y="0" width="36" height="36" fill-opacity="0" d="M0 0H0.9V0.9H0V0z"/></svg>
                    </a>
                    <a target="_parent" href="#" data-bs-toggle="popover" title="Información" data-bs-content="Esta comisión ya se encuentra cerrada." class="isDisabled">
                        <svg class="svg-miembro ml-1" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 25 25" style="enable-background:new 0 0 587.91 587.91;" xml:space="preserve"><g><g><g><path d="M3.676 21.324a12.445 12.445 0 0 0 8.823 3.655 12.436 12.436 0 0 0 8.823 -3.655 12.445 12.445 0 0 0 3.655 -8.823 12.436 12.436 0 0 0 -3.655 -8.823 12.431 12.431 0 0 0 -3.966 -2.673A12.368 12.368 0 0 0 12.5 0.022 12.436 12.436 0 0 0 3.677 3.677 12.436 12.436 0 0 0 0.022 12.5a12.436 12.436 0 0 0 3.655 8.823zM12.5 1.843c5.886 0 10.657 4.772 10.657 10.657 0 5.886 -4.772 10.657 -10.657 10.657S1.843 18.386 1.843 12.5C1.843 6.614 6.615 1.843 12.5 1.843z"/><path d="M12.5 25a12.465 12.465 0 0 1 -8.838 -3.662A12.465 12.465 0 0 1 0 12.5 12.465 12.465 0 0 1 3.662 3.662 12.465 12.465 0 0 1 12.5 0a12.465 12.465 0 0 1 8.838 3.662A12.465 12.465 0 0 1 25 12.5a12.465 12.465 0 0 1 -3.662 8.838A12.465 12.465 0 0 1 12.5 25zM12.5 0.042A12.418 12.418 0 0 0 3.692 3.692 12.418 12.418 0 0 0 0.042 12.5 12.418 12.418 0 0 0 3.692 21.309 12.418 12.418 0 0 0 12.5 24.958a12.418 12.418 0 0 0 8.808 -3.649 12.418 12.418 0 0 0 3.649 -8.808c0 -1.681 -0.33 -3.313 -0.98 -4.849a12.404 12.404 0 0 0 -2.669 -3.959A12.418 12.418 0 0 0 12.5 0.043zm0 23.136a10.608 10.608 0 0 1 -7.551 -3.128c-2.017 -2.017 -3.128 -4.698 -3.128 -7.551s1.111 -5.534 3.128 -7.551S9.648 1.822 12.5 1.822s5.534 1.111 7.551 3.128 3.128 4.698 3.128 7.551 -1.111 5.534 -3.128 7.551A10.608 10.608 0 0 1 12.5 23.178zm0 -21.314a10.569 10.569 0 0 0 -7.521 3.115C2.97 6.988 1.864 9.659 1.864 12.5s1.107 5.512 3.115 7.521c2.009 2.009 4.68 3.115 7.521 3.115s5.512 -1.107 7.521 -3.115A10.566 10.566 0 0 0 23.136 12.5c0 -2.841 -1.107 -5.512 -3.115 -7.521A10.566 10.566 0 0 0 12.5 1.864z"/></g><g><path d="M7.863 17.137a0.907 0.907 0 0 0 0.644 0.267 0.907 0.907 0 0 0 0.644 -0.267L12.5 13.788l3.348 3.348a0.91 0.91 0 1 0 1.288 -1.288L13.788 12.5l3.348 -3.348a0.911 0.911 0 1 0 -1.288 -1.288L12.5 11.212l-3.348 -3.348a0.911 0.911 0 1 0 -1.288 1.288L11.212 12.5l-3.348 3.348a0.911 0.911 0 0 0 0 1.288z"/><path d="M16.492 17.425a0.926 0.926 0 0 1 -0.659 -0.273l-3.333 -3.333 -3.333 3.333c-0.176 0.176 -0.41 0.273 -0.659 0.273s-0.483 -0.097 -0.659 -0.273a0.926 0.926 0 0 1 -0.273 -0.659c0 -0.249 0.097 -0.483 0.273 -0.659l3.333 -3.333 -3.333 -3.333a0.933 0.933 0 0 1 0 -1.318 0.926 0.926 0 0 1 0.659 -0.273c0.249 0 0.483 0.097 0.659 0.273l3.333 3.333 3.333 -3.333a0.926 0.926 0 0 1 0.659 -0.273c0.249 0 0.483 0.097 0.659 0.273 0.176 0.176 0.273 0.41 0.273 0.659s-0.097 0.483 -0.273 0.659l-3.333 3.333 3.333 3.333a0.926 0.926 0 0 1 0.273 0.659c0 0.249 -0.097 0.483 -0.273 0.659a0.927 0.927 0 0 1 -0.659 0.273zM12.5 13.758l3.363 3.363a0.883 0.883 0 0 0 0.629 0.261 0.884 0.884 0 0 0 0.629 -0.261c0.168 -0.168 0.261 -0.392 0.261 -0.629s-0.092 -0.461 -0.261 -0.629L13.758 12.5l3.363 -3.363c0.168 -0.168 0.261 -0.392 0.261 -0.629s-0.092 -0.461 -0.261 -0.629c-0.168 -0.168 -0.392 -0.261 -0.629 -0.261s-0.461 0.092 -0.629 0.261L12.5 11.242l-3.363 -3.363a0.884 0.884 0 0 0 -0.629 -0.261 0.883 0.883 0 0 0 -0.629 0.261 0.892 0.892 0 0 0 0 1.258L11.242 12.5l-3.363 3.363c-0.168 0.168 -0.261 0.392 -0.261 0.629s0.092 0.461 0.261 0.629c0.168 0.168 0.392 0.261 0.629 0.261s0.461 -0.092 0.629 -0.261L12.5 13.758z"/></g></g></g></svg>
                    </a>
                    -->
                </div>
                <div class="div-padre">
                    <div class="grid-container">
                        <div class="column isDisabled">Miembro</div>
                        <div class="column isDisabled">Cargo</div>
                        <div class="column isDisabled">Incorporación</div>
                        <div class="column isDisabled">Baja</div>
                        <div class="column isDisabled">Motivo de baja</div>
                    </div>
                <!-- Miembros ya existentes en la comisión -->
                {% for miembro in miembros_comision %}
                <div class="form-group my-3 members-comission">
                    <!-- El nombre es fijo, no tiene sentido cambiarlo -->
                    <input class="form-control input-nombre isDisabled" id="{{ miembro[0] }}-nombre" name="nombre" type="text" value="{{ miembro[6] }}"></input>
                    <!-- La fecha de incorporación y de baja si se pueden cambiar -->
                    <input class="form-control mx-2 input-cargo isDisabled" id="{{ miembro[0] }}-cargo" name="cargo_modificado-{{ miembro[0] }}" type="text" {% if miembro[4] %} value="{{ miembro[4] }}" {% endif %}></input>
                    <input class="form-control mx-2 input-fecha isDisabled" id="{{ miembro[0] }}-fecha_incorporacion" name="fecha_incorporacion_modificada-{{ miembro[0] }}"  type="text" placeholder="Fecha de incorporación" onfocus="(this.type='date')" onblur="(this.type='text')" value="{{ miembro[2] | datetime('form') }}"></input>
                    <input class="form-control mx-2 input-fecha isDisabled" id="{{ miembro[0] }}-fecha_baja" name="fecha_baja_modificada-{{ miembro[0] }}" type="text" placeholder="Fecha de baja" onfocus="(this.type='date')" onblur="(this.type='text')" {% if miembro[3] %}  value="{{ miembro[3] | datetime('form') }}" {% endif %}></input>
                    <input class="form-control mx-2 input-motivoBaja isDisabled" id="{{ miembro[0] }}-motivo_baja" name="motivo_baja_modificado-{{ miembro[0] }}" type="text" {% if miembro[5] %} value="{{ miembro[5] }}" {% endif %}></input>
                </div>
                {% endfor %}
            </div>
                <div id="buttons-container">
                    {{ form.submit(class_='btn btn-primary mt-4') }}
                    <a href="{{url_for('comision.consult_comision', id_comision=comision.id)}}" class="btn btn-secondary mt-4">Cancelar</a>
                </div>
            </fieldset>
        </form>
    </div>
    <script src="{{url_for('static', filename='js/comisiones-index.js')}}"></script>
{% endblock %}